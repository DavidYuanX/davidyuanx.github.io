<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="A front end siege division built ~"><title>CentOS 搭建 服务端 | David's blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/normalize.min.css"><link rel="stylesheet" type="text/css" href="/css/pure-min.css"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="/js/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + 'b5b30c3f05f1d88ff91cf0f233b1fa32';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();

<!-- GrowingIO Analytics code version 2.1 -->
<!-- Copyright 2015-2018 GrowingIO, Inc. More info available at http://www.growingio.com -->
!function(e,t,n,g,i){e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},n=t.createElement("script"),tag=t.getElementsByTagName("script")[0],n.async=1,n.src=('https:'==document.location.protocol?'https://':'http://')+g,tag.parentNode.insertBefore(n,tag)}(window,document,"script","assets.giocdn.com/2.1/gio.js","gio");
  gio('init','9a2bc3f2970e279e', {});

//custom page code begin here

//custom page code end here

gio('send');</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">CentOS 搭建 服务端</h1><a id="logo" href="/.">David's blog</a><p class="description">Welcome to my den</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">CentOS 搭建 服务端</h1><div class="post-meta">Jul 5, 2019<span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a class="disqus-comment-count" href="/2019/07/05/CentOS/#vcomment"> </a><div class="post-content"><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">diskutil list</span><br><span class="line"></span><br><span class="line">##### 将U盘卸载</span><br><span class="line"></span><br><span class="line">diskutil unmountDisk /dev/disk2  <span class="comment">//disk2 需要为 u盘 盘符</span></span><br><span class="line"></span><br><span class="line">#####  yum intsall wget</span><br><span class="line"></span><br><span class="line">#####  wget download wget</span><br><span class="line">wget http:<span class="comment">//mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-DVD-2009.iso</span></span><br><span class="line"></span><br><span class="line">##### 用dd命令制作安装盘</span><br><span class="line">sudo dd <span class="keyword">if</span>=~<span class="regexp">/Downloads/</span>CentOS<span class="number">-7</span>-x86_64-DVD<span class="number">-2009.</span>iso <span class="keyword">of</span>=<span class="regexp">/dev/</span>rdisk2 bs=<span class="number">4</span>m <span class="comment">// 静待10分钟</span></span><br></pre></td></tr></table></figure>
<h5 id="最小化安装的有线网络配置"><a href="#最小化安装的有线网络配置" class="headerlink" title="最小化安装的有线网络配置"></a>最小化安装的有线网络配置</h5><p>/etc/sysconfig/network-scripts/ifcfg-enp3s0   ONBOOT=yes</p>
<h5 id="写一个简单的例子"><a href="#写一个简单的例子" class="headerlink" title="写一个简单的例子"></a>写一个简单的例子</h5><p>让我们写一个Hello World程序。 在src目录下修改main.ts文件：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sayHello &#125; <span class="keyword">from</span> <span class="string">"./greet"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(sayHello(<span class="string">"TypeScript"</span>));</span><br></pre></td></tr></table></figure></p>
<p>修改src/greet.ts文件如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params">name: string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello from <span class="subst">$&#123;name&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>修改gulpfile.js文件如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"><span class="keyword">var</span> ts = <span class="built_in">require</span>(<span class="string">"gulp-typescript"</span>);</span><br><span class="line"><span class="keyword">var</span> tsProject = ts.createProject(<span class="string">"tsconfig.json"</span>);</span><br><span class="line"></span><br><span class="line">##### 最小化安装的无线网络配置</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>首先下载iw工具。</span><br><span class="line"></span><br><span class="line">  yum -y install iw</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>获取无线网卡的名称</span><br><span class="line"></span><br><span class="line">  执行iw dev，假设获得名称为 wlp3s0（示例）</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>激活无线网络接口</span><br><span class="line"></span><br><span class="line">  执行ip link <span class="keyword">set</span> wlp3s0 up/down 或 ifconfig wlp3s0 up/down</span><br><span class="line"></span><br><span class="line">4.扫描当前环境中的无线网络</span><br><span class="line"></span><br><span class="line">  执行iw wlp3s0 scan|grep SSID，假设你能够连接的网络名称是TP-LINK-1（示例）</span><br><span class="line"></span><br><span class="line">5.登录指定网络</span><br><span class="line"></span><br><span class="line">  执行wpa_supplicant -B -i wlp3s0 -c &lt;(wpa_passphrase "TP-LINK-1" "此网络的密码")</span><br><span class="line"></span><br><span class="line">6.主动请求动态地址</span><br><span class="line"></span><br><span class="line">  dhclient wlp3s0</span><br><span class="line"></span><br><span class="line">7.查看获取的网络地址</span><br><span class="line"></span><br><span class="line">  执行ip addr show wlp3s0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### 暴露 22 端口</span><br><span class="line"></span><br><span class="line">##### CentOS yum 安装Nginx</span><br><span class="line"></span><br><span class="line">1.添加Nginx到YUM源</span><br><span class="line">sudo rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br><span class="line">2.安装Nginx</span><br><span class="line">sudo yum install -y nginx</span><br><span class="line">3.启动Nginx</span><br><span class="line">sudo systemctl start nginx.service</span><br><span class="line">4.过防火墙</span><br><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=http</span><br><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=https</span><br><span class="line">sudo firewall-cmd --reload</span><br><span class="line">5.开机启动</span><br><span class="line">sudo systemctl enable nginx</span><br><span class="line">以下是Nginx的默认路径：</span><br><span class="line"></span><br><span class="line">(1) Nginx配置路径：/etc/nginx/</span><br><span class="line">(2) PID目录：/var/run/nginx.pid</span><br><span class="line">(3) 错误日志：/var/log/nginx/error.log</span><br><span class="line">(4) 访问日志：/var/log/nginx/access.log</span><br><span class="line">(5) 默认站点目录：/usr/share/nginx/html</span><br></pre></td></tr></table></figure></p>
<h5 id="暴露其他端口"><a href="#暴露其他端口" class="headerlink" title="暴露其他端口"></a>暴露其他端口</h5><p>1、开启端口<br>firewall-cmd –zone=public –add-port=80/tcp –permanent<br>2、查询端口号80 是否开启：<br>firewall-cmd –query-port=80/tcp<br>3、查询有哪些端口是开启的:<br>firewall-cmd –list-port</p>
<p>命令含义：<br>–zone #作用域<br>–add-port=80/tcp #添加端口，格式为：端口/通讯协议<br>–permanent #永久生效，没有此参数重启后失效</p>
<p>关闭firewall：<br>systemctl stop firewalld.service #停止firewall<br>systemctl disable firewalld.service #禁止firewall开机启动</p>
<h3 id="Nginx-命令"><a href="#Nginx-命令" class="headerlink" title="Nginx 命令"></a>Nginx 命令</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">nginx -t 						<span class="comment">// 检查配置文件nginx.conf的正确性</span></span><br><span class="line"></span><br><span class="line">nginx -s reload            # 重新载入配置文件</span><br><span class="line"></span><br><span class="line">nginx -s reopen           # 重启 Nginx</span><br><span class="line"></span><br><span class="line">nginx -s stop              # 停止 Nginx</span><br></pre></td></tr></table></figure>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Find / -name <span class="string">'my*'</span>.            <span class="comment">// 在 / 目录下查找 my 开头的文件</span></span><br><span class="line"></span><br><span class="line">netstat -tunlp | grep <span class="number">3000</span>   <span class="comment">// 查看端口</span></span><br><span class="line"></span><br><span class="line">tail -fn <span class="number">50</span> nohup.out          <span class="comment">// 查看日志</span></span><br><span class="line"></span><br><span class="line"> nohup command &amp;    <span class="comment">// 后台运行进程</span></span><br><span class="line"></span><br><span class="line">sensors                             <span class="comment">// 查看温度</span></span><br><span class="line"></span><br><span class="line">top                                    <span class="comment">// 查看运行状态</span></span><br></pre></td></tr></table></figure>
<h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><p>设置是否允许密码登陆</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">AuthorizedKeysFile   .ssh/authorized_keys   <span class="comment">// 公钥认证文件</span></span><br><span class="line"></span><br><span class="line">cat id_rsa.pub &gt;&gt; authorized_keys  <span class="comment">// 注入公钥认证</span></span><br><span class="line"></span><br><span class="line">vim /etc/ssh/sshd_config   <span class="comment">// 编辑配置文件</span></span><br><span class="line"></span><br><span class="line">PubkeyAuthentication yes/no  <span class="comment">// 修改使用公钥登录</span></span><br><span class="line"></span><br><span class="line">PasswordAuthentication yes/no  <span class="comment">// 修改使用密码登录</span></span><br><span class="line"></span><br><span class="line">service sshd restart   <span class="comment">// 重启服务</span></span><br></pre></td></tr></table></figure>
<h3 id="端口管理"><a href="#端口管理" class="headerlink" title="端口管理"></a>端口管理</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">netstat -ano  <span class="comment">// 查看所有端口</span></span><br><span class="line"></span><br><span class="line">netstat -anp|grep <span class="number">80</span> <span class="comment">// 查看指定端口</span></span><br><span class="line"></span><br><span class="line">lsof -i:<span class="number">8080</span> <span class="comment">// 查看指定端口 需要 root 用户的权限来执行</span></span><br><span class="line"></span><br><span class="line">kill <span class="number">-9</span> PID  <span class="comment">// 强制关闭 进程</span></span><br></pre></td></tr></table></figure>
<h3 id="Linux关机和重启命令总结"><a href="#Linux关机和重启命令总结" class="headerlink" title="Linux关机和重启命令总结"></a>Linux关机和重启命令总结</h3><h4 id="关机命令："><a href="#关机命令：" class="headerlink" title="关机命令："></a>关机命令：</h4> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">shutdown -h now（立刻进行关机）</span><br><span class="line"></span><br><span class="line">halt（立刻进行关机）</span><br><span class="line"></span><br><span class="line">poweroff（立刻进行关机）</span><br></pre></td></tr></table></figure>
<h4 id="重启命令："><a href="#重启命令：" class="headerlink" title="重启命令："></a>重启命令：</h4> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">shutdown -r now（现在重新启动计算机）</span><br><span class="line"></span><br><span class="line">reboot（现在重新启动计算机）</span><br><span class="line"></span><br><span class="line"> 区别：shutdown -h now和shutdown -r now必须是root用户或者具有root权限的用户才能使用，而halt和reboot是Linux系统中的任何用户都可使用，不需要root权限。</span><br><span class="line"></span><br><span class="line"> 联系：halt 与 poweroff 具有相同的功能。</span><br></pre></td></tr></table></figure>
<p>#### </p>
</div><iframe src="/donate/?AliPayQR=/img/alipay.jpeg&amp;WeChatQR=null&amp;GitHub=https://github.com/DavidYuanX&amp;BTCQR=null&amp;BTCKEY=null&amp;PayPal=null" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;" frameborder="0" scrolling="no"></iframe><div class="tags"><a href="/tags/CentOS/">CentOS</a><a href="/tags/Linux/">Linux</a></div><div class="post-nav"><a class="pre" href="/2019/07/06/Vue-ECharts/">Vue-ECharts</a><a class="next" href="/2019/06/10/Vue-router/">Vue源码分析之 Vue-router 篇</a></div><div id="vcomment"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/@waline/client@v2/dist/waline.css"><script src="//unpkg.com/@waline/client@v2/dist/waline.js"></script><script>const waline = Waline.init({
  el: '#vcomment',
  path: decodeURI(location.pathname) || '/',
  lang: 'zh-cn',
  serverURL: 'https://vercel-xi-gilt.vercel.app',
  pageSize:'10'
});</script></div></div></div><aside class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input class="popup-trigger" placeholder="Search" readonly="readonly"></div></div><div class="toc-article" id="toc"><div class="toc-title">Categories<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装"><span class="toc-number">1.</span> <span class="toc-text">安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#最小化安装的有线网络配置"><span class="toc-number">1.0.1.</span> <span class="toc-text">最小化安装的有线网络配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#写一个简单的例子"><span class="toc-number">1.0.2.</span> <span class="toc-text">写一个简单的例子</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#暴露其他端口"><span class="toc-number">1.0.3.</span> <span class="toc-text">暴露其他端口</span></a></li></ol></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#Nginx-命令"><span class="toc-number">2.</span> <span class="toc-text">Nginx 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常用命令"><span class="toc-number">3.</span> <span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户管理"><span class="toc-number">4.</span> <span class="toc-text">用户管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#端口管理"><span class="toc-number">5.</span> <span class="toc-text">端口管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux关机和重启命令总结"><span class="toc-number">6.</span> <span class="toc-text">Linux关机和重启命令总结</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#关机命令："><span class="toc-number">6.1.</span> <span class="toc-text">关机命令：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#重启命令："><span class="toc-number">6.2.</span> <span class="toc-text">重启命令：</span></a></li></ol></li></div></div></div></aside><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2022 <a href="/." rel="nofollow">David's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv"><i class="fa fa-eye" aria-hidden="true"></i> <span id="busuanzi_value_site_pv"></span> times</span></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/underscore-min.js"></script><script type="text/javascript" src="/js/inView.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>